---
issue: 996
title: "New notes from cards notes not created in folder set in \"Note folder\""
url: https://github.com/mgmeyers/obsidian-kanban/issues/996
author: chigh
created: 2024-06-19T17:36:05Z
os: macOS
status: fixed
investigation_notes: "Code at ItemMenu.ts:69-74 reads new-note-folder setting and uses getAbstractFileByPath, but if the folder doesn't exist (returns null), the null was cast to TFolder and passed to createNewMarkdownFile, which falls back to vault root. Fixed by adding instanceof TFolder check before using the folder."
fix_attempted: true
fix_pr: ""
---

## Description

### Describe the bug

When using "New note from card" and have the "Note folder" set to a value and the directory exists, the cards are created in the "default" location for new cards (the root folder of the vault) instead of the set location in "Note folder".

- Obsidian 1.6.3 on MacOS (M2) with MacOS 14.5 (Sonoma)
- Kanban plugin 2.0.51.

### Expected Behavior

The new card should be stored in the location set in "Note folder".

### Steps to reproduce

1. add a card to a list
2. using the ... menu, choose **New note from card**
3. Edit the card, it's location is the default folder for the vault.

### Relevant errors (if available)

```shell
None.
```


### Operating system

macOS

## Investigation Notes
<!-- To be filled during triage -->

## Fix Attempts
<!-- Document any attempted fixes -->
